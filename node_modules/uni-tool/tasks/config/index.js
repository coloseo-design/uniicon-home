const path = require('path');

const workspace = process.cwd();
const restParams = process.argv.slice(3);

const params = (restParams || []).reduce((composed, item) => {
  const [key, value] = item.split('=');
  Object.assign(composed, {
    [key]: value,
  });
  return composed;
}, {
  source: 'src',
});

const src = path.resolve(workspace, params.source);
const config = {
  workspace,
  DEFAULT_PROJECT_NAME: 'src',
  src,
  lessDir: [path.join(src, '/**/*.less')],
  esDest: path.resolve(workspace, 'es'),
  libDest: path.resolve(workspace, 'lib'),
  demo: [path.join(src, '/**/demo.tsx'), path.join(src, '/**/demo.ts')],
  tsDir: [
    path.join(src, '/**/*.ts'),
    path.join(src, '/**/*.tsx'),
    `!${path.join(src, '/**/demo.tsx')}`,
    `!${path.join(src, '/**/demo.ts')}`,
  ],
  md: [
    path.join(src, '/**/*.md'),
  ],
};

module.exports = config;
